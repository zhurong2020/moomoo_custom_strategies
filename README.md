# 🚀 Moomoo多策略量化交易系统

专为Moomoo平台设计的多元化量化交易系统，包含DCA定投、网格交易、期权策略等多种专业策略。

[![验证状态](https://img.shields.io/badge/验证状态-100%25通过-brightgreen.svg)](./data/validation_reports/)
[![当前版本](https://img.shields.io/badge/版本-v2.8.0--DataCollection-blue.svg)](./CLAUDE.md)
[![开源协议](https://img.shields.io/badge/协议-Apache%202.0-orange.svg)](./LICENSE)

## ⚠️ Important Disclaimer | 免责声明

### English Disclaimer
This project is for educational and research purposes only. Please be aware:

1. The author is not a professional financial advisor, and all strategies are based on personal research and experience.
2. Quantitative trading involves inherent risks, including but not limited to market risk, liquidity risk, and technical risk.
3. Anyone who uses the code in this project for live trading does so at their own risk and is solely responsible for any consequences.
4. Past performance does not guarantee future results. All trading decisions based on this project require users' own judgment and responsibility.
5. Before using this code for live trading, it is strongly recommended to:
   - Fully understand the principles and risks of quantitative trading
   - Carefully read and understand the code implementation
   - Conduct thorough testing using paper trading
   - Adjust parameters according to personal risk tolerance
   - Maintain reasonable position and capital management

### 中文声明
本项目仅供学习和研究使用，不构成任何投资建议或交易指导。请注意：

1. 作者不是专业的投资顾问或理财规划师，本项目中的所有策略均基于个人研究和实践经验。
2. 量化交易存在固有风险，包括但不限于市场风险、流动性风险、技术风险等。
3. 任何人使用本项目中的代码进行实盘交易需自行承担全部风险和后果。
4. 策略的历史表现不代表未来收益，任何基于本项目进行的交易决策需要使用者自行判断和负责。
5. 在使用本项目代码进行实盘交易前，强烈建议：
   - 充分了解量化交易的原理和风险
   - 仔细阅读并理解代码的具体实现
   - 使用模拟盘进行充分测试
   - 根据个人风险承受能力调整参数
   - 合理控制仓位和资金规模

## 🎯 项目概要

本项目提供多元化的量化交易解决方案，涵盖不同的投资策略和风险偏好，为用户提供专业的量化交易工具。

### ✨ 系统特性
- **📊 DCA定投**: 5层智能回撤保护，数据收集模式，分层商业体系
- **🔲 网格交易**: 动态网格管理，金字塔加仓，高级风控系统
- **🎰 期权策略**: 轮换期权(Wheel)策略，专业期权交易工具
- **🔧 专业架构**: 功能分类清晰，便于维护和扩展
- **⚡ 高性能**: 代码优化，数据收集，批量操作
- **📊 完整验证**: 多策略验证测试，功能完整性100%通过

## 🏆 策略矩阵

| 策略类型 | 主要特性 | 适用场景 | 状态 |
|----------|----------|----------|----------|
| **📊 DCA定投** | 5层智能加仓+数据收集 | 长期定投，看好优质资产 | **✅ v2.8.0** |
| **🔲 网格交易** | 动态网格+金字塔加仓 | 震荡行情，双向获利 | **✅ v5.3.13** |
| **🎰 轮换期权** | 卖Put+备兼看Call组合 | 获取权利金收入 | **🔧 开发中** |

*基于多策略真实市场数据验证*

## 🚀 立即开始

### 1. 选择适合的版本

#### 🆓 免费版 (完全开源)
```python
# 使用 strategies/dca_free_stable.quant
qty = 20                    # 投资数量 (10-100股，10的倍数)
preset_mode = 2             # 预设模式: 1=保守 2=平衡 3=积极
version_tier = 1            # 版本等级: 1=免费版
```
- **🎁 新功能**: **智能加仓体验券** - 免费享受1次付费版功能！
- **核心特性**: 每周定投 + 3层回撤保护 + 体验券系统
- **体验券**: 10%回撤时自动触发2.0倍智能加仓 (仅1次)
- **获取方式**: GitHub完全开源

#### 💎 付费版 (¥35/月)
```python  
# 使用 strategies/dca_free_stable.quant
version_tier = 2                  # 版本等级: 2=付费版
qty = 50                         # 投资数量 (1-200股，任意)
aggressive_multiplier = 2.5      # 激进乘数 (1.0-2.5x)
data_collection_mode = 1         # 🆕 数据收集模式 (0=正常 1=纯投资)
```
- **完整功能**: **5层智能加仓系统** - 精准应对各种市场回撤
- **🆕 数据收集模式**: 纯粹每日定投，无判断逻辑，快速获取历史数据
- **激进模式**: 最高2.5x乘数，长期收益显著优于免费版
- **无限制**: 无体验券限制，每次回撤都智能加仓
- **获取方式**: 微信联系获取授权码

### 2. Moomoo平台部署
1. **选择策略**: 从对应子目录获取.quant文件  
2. **导入平台**: 复制到Moomoo量化策略编辑器
3. **选择标的**: DCA推荐ETF，网格适合个股，期权需有期权数据
4. **参数调优**: 根据策略类型和风险偏好调整参数
5. **温和上线**: 先模拟回测，再小额实盘，最后正式运行

### 🎁 体验券使用指南 (免费版专享)

#### 什么是智能加仓体验券？
- **赠送内容**: 每位免费版用户获得 **1次** 智能加仓体验机会
- **触发条件**: 当投资标的从历史最高点回撤达到 **10%** 时自动触发
- **体验效果**: 自动执行 **2.0倍加仓** (如设定20股，体验时加仓40股)
- **真实体验**: 这不是模拟，而是真实的智能加仓操作！

#### 体验券的价值
```
🎯 假设场景: 投资SPY，正常每次买入20股
📈 正常情况: 市场回调10%时，继续按计划买入20股
🎁 体验券激活: 系统自动识别机会，加仓至40股 (2.0倍)
💰 长期价值: 在最佳时机加倍抄底，显著降低平均成本
```

#### 使用后会怎样？
- ✅ **体验完整付费功能**: 感受智能加仓的威力
- ⚠️ **体验券用完提醒**: 后续回调将显示"体验券已用完"
- 🔓 **付费转化引导**: 了解付费版的完整5层加仓系统
- 📊 **效果对比展示**: 看到与继续使用免费版的收益差异

#### 为什么提供体验券？
我们相信智能加仓系统的威力。一旦您体验到在市场回调时智能加仓的效果，就会理解付费版的真正价值。这不是营销噱头，而是对产品的信心！

### 🆕 数据收集模式使用指南 (付费版v2.8.0新增)

#### 什么是数据收集模式？
数据收集模式是专为快速获取长期历史数据设计的纯粹投资模式。

- **零判断逻辑**: 每日无条件投资，不进行任何复杂的市场判断
- **数据完整性**: 每个交易日都有数据点，获得最完整的历史覆盖
- **极速执行**: 252天(约1年)数据收集<1秒完成
- **专为回测**: 非常适合史回测和策略数据分析

#### 如何启用？
```python
# 在付费版中设置
data_collection_mode = 1    # 0=正常策略 1=数据收集

# 配合使用
version_tier = 2           # 付费版才支持
qty = 20                   # 每日投资数量
initial_balance = 200000   # 建议20万启动资金(支持长期投资)
```

#### 使用场景
1. **历史回测**: 快速获取1-3年完整DCA数据
2. **策略验证**: 测试不同参数设置的历史表现
3. **数据分析**: 获取纯粹DCA基准数据用于对比
4. **快速测试**: 在不同市场环境下测试策略效果

#### 数据收集优势
- **时间效率**: 原来需要数小时的数据收集，现在几秒完成
- **数据质量**: 每日无遗漏投资，数据完整性100%
- **灵活切换**: 随时在正常策略和数据收集模式间切换
- **资金优化**: 智能调整投资数量，充分利用可用资金

## 📊 策略逻辑

### 核心算法
1. **定期定投**: 固定周期(每日/每周)投入固定数量
2. **回撤检测**: 监控价格相对近期高点的下跌幅度  
3. **智能加仓**: 市场下跌时自动增加投资数量
4. **风险管理**: 多层保护机制，极端情况自动调整
5. **🆕 数据收集模式**: 零判断纯投资，专为历史数据获取设计

### 智能加仓系统 (付费版)
```
正常市场     → 标准投资 (例: 20股)
5%回撤      → 1.5倍加仓 (30股)
10%回撤     → 2.0倍加仓 (40股)
15%回撤     → 2.2倍加仓 (44股)
20%回撤     → 2.5倍加仓 (50股)
30%+极端回撤 → 保护模式 (仅定投)
```

### 🆕 数据收集模式 (v2.8.0)
```python
data_collection_mode = 1  # 启用纯数据收集
# 特点:
# - 每日无条件投资，无任何判断逻辑
# - 快速获取1年+完整历史数据
# - 专为回测和数据分析设计
# - 1年数据收集<1秒完成
```

### 收益优势来源
- **投资频率**: 每日投资捕获更多价格机会(+2.1%)
- **成本平滑**: 高频投资降低波动性影响
- **智能加仓**: 回撤时增投降低平均成本(+2.0%)
- **协同效应**: 组合策略产生额外收益

## 🛠️ 开发工具

### 验证与测试
```bash
# 完整版本验证 (免费版+付费版)
python tools/validate_both_versions.py

# v2.8.0数据收集模式测试
python tools/test_v280_data_collection.py

# v2.7.0代码重构验证
python tools/test_v270_refactoring_validation.py

# 查看最新验证报告
ls data/validation_reports/

# 检查策略语法
python -m py_compile strategies/dca_free_stable.quant
```

### 数据分析
- **真实市场数据**: 251天SPY历史价格
- **详细报告**: JSON + Markdown双格式输出
- **功能验证**: 参数限制、授权验证、加仓逻辑全覆盖

## 📁 项目结构

```
moomoo_custom_strategies/
├── strategies/                    # 策略文件
│   ├── dca_free_stable.quant        # 📚 主开发版 (v2.8.0)
│   ├── dca_free_public.quant        # 🆓 免费版 (开源)
│   ├── dca_premium_moomoo.quant     # 💎 付费版 (授权)
│   └── dca_dev_mixed.quant          # 🔒 开发版 (.gitignore保护)
├── tools/                         # 开发工具
│   ├── validate_both_versions.py    # 版本验证框架
│   ├── test_v280_data_collection.py # v2.8.0数据收集测试
│   └── test_v270_refactoring_validation.py # v2.7.0重构验证
├── data/                          # 数据报告
│   └── validation_reports/          # 验证结果
├── docs/                          # 文档资料  
│   ├── STABLE_VERSION_SYNC_PLAN.md  # 版本同步计划
│   └── BLOG_POST_DRAFT.md           # 博文草稿
├── CLAUDE.md                      # 项目配置
└── README.md                      # 本文件
```

## 🎯 版本对比

### 功能对比矩阵

| 功能项目 | 🆓 免费版 | 💎 付费版(¥35/月) | 👑 VIP版(独立App) |
|---------|----------|------------------|------------------|
| **投资频率** | 每周(10080分钟) | **每日(1440分钟)** | 自定义间隔 |
| **数量配置** | 10-100股(10倍数) | **1-200股(任意)** | 无限制 |
| **智能功能** | 3层保护+体验券 | **5层智能加仓** | 8层专业系统 |
| **🆕数据收集** | ❌ 不支持 | **✅ 纯投资模式** | 高级数据分析 |
| **风险保护** | 基础提醒 | **极端回撤保护** | 完整风控体系 |
| **预期收益** | 基准DCA收益 | **+4.1%年化** | +6%年化(预期) |
| **技术支持** | GitHub社区 | **微信专属群** | 一对一指导 |

### 付费版价值主张
- **投资回报**: ¥35/月 → 预期多获得4.1%年化收益
- **成本效率**: 基于历史数据，付费版明显优势
- **风险控制**: 智能加仓系统在市场波动中保护资金

## 📈 验证数据

### 测试环境 (2024-2025年度)
- **测试数据**: 251天真实SPY市场数据
- **市场波动**: 涵盖上涨、下跌、震荡多种环境  
- **验证维度**: 功能完整性 + 参数限制 + 授权验证

### 验证结果
- **免费版**: ✅ 参数限制100%有效，数量验证全通过
- **付费版**: ✅ 授权验证正常，智能加仓逻辑完整
- **性能对比**: ✅ 两版本差异明显，价值层级清晰

## 🔐 安全与保护

### 商业保护机制
- **免费版**: 完全开源，无商业代码泄露风险
- **付费版**: 严格授权验证，错误时策略停止
- **开发版**: .gitignore保护，防止意外泄露
- **风险声明**: 完整免责条款，保护用户权益

### 开源信息  
- 免费版策略代码和技术文档
- 验证结果和性能分析报告
- 开发工具和测试框架
- 技术博文和教育内容

## 📞 支持与联系

### 免费版支持
- **GitHub Issues**: 提交Bug和功能请求
- **详细文档**: `/docs/` 目录包含完整指南
- **验证工具**: 自助验证策略功能完整性

### 付费版服务
- **授权获取**: 微信联系获取授权码
- **技术支持**: 7×24小时微信群支持  
- **定制开发**: 企业级解决方案
- **合作咨询**: 战略合作机会

## 📄 许可协议

### 开源组件 (Apache 2.0)
- 免费版策略代码和核心逻辑
- 开发工具和测试验证框架
- 文档资料和教育内容

### 商业组件  
- 付费版高级功能和算法
- VIP专业服务和一对一支持
- 定制开发和集成服务

## 🎯 下一步计划

### 即将推出
- [ ] 真实市场数据回测对比
- [ ] 性能图表和可视化报告
- [ ] 用户反馈收集和产品优化
- [ ] 技术博文发布和社区建设

### 长期规划
- [ ] 独立App开发 (8层完整系统)
- [ ] 多资产组合投资功能
- [ ] 机器学习策略优化
- [ ] 专业报告和分析工具

---

**🚀 专为Moomoo平台精心打造的专业量化定投策略**

[![立即开始](https://img.shields.io/badge/立即开始-免费版-brightgreen.svg)](./strategies/dca_free_public.quant)
[![联系付费版](https://img.shields.io/badge/联系-付费版-blue.svg)](mailto:your_email@example.com)
[![查看验证](https://img.shields.io/badge/查看-验证报告-orange.svg)](./data/validation_reports/)

*最后更新: 2025-08-30 | 版本: v2.8.0-DataCollection | 验证状态: ✅ 全部通过*